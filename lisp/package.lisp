(defpackage #:lightningfn-ffi
  (:use #:cl #:cffi #:trivial-garbage))

(defpackage #:lightningfn
  (:nicknames #:jit)
  (:documentation "A LISP interface to GNU lightning.
To avoid collisions between function names in GNU lightning and functions in LISP package :CL, some function names are changed:
  print       = print-jit
  disassemble = disassemble-jit
Author: Anton Moll")
  (:use #:cl #:lightningfn-ffi #:cffi)
  ;;(:shadow #:print #:disassemble)
  ;; (:import-from :cffi
  ;; 		#:mem-ref #:with-foreign-objects #:with-foreign-object
  ;; 		#:foreign-alloc #:foreign-free #:null-pointer-p)
  (:export
   ;; interface.lisp
   #:with-init
   #:new-state
   #:finalize-state
   #:clear-state
   #:reg-r
   #:reg-v
   #:reg-f
   #:*jit*
   #:with-new-state
   ;; lifun.lisp
   #:lifun
   #:*lifuns*
   #:deflifun
   #:funcall-lifun
   #:getarg
   #:with-args
   #:retr
   #:with-regs
   ;; generated by (PROGN (MAPC (LAMBDA (X) (FORMAT T "#:~A~%" (LIGHTNINGFN::CONVERT-PACKAGE X :CL-USER))) (SORT (LIGHTNINGFN::UNIQUE LIGHTNINGFN::*TO-BE-EXPORTED-FUNCTIONS*) #'STRING-LESSP :KEY #'STRING)) NIL) on a 64-bit machine, so that the *-L functions are present as well.
   ;;
   #:ABSR-D
   #:ABSR-F
   #:ADDCI
   #:ADDCR
   #:ADDI
   #:ADDI-D
   #:ADDI-F
   #:ADDR
   #:ADDR-D
   #:ADDR-F
   #:ADDRESS
   #:ADDXI
   #:ADDXR
   #:ALIGN
   #:ALLOCAI
   #:ANDI
   #:ANDR
   #:ARG
   #:ARG-D
   #:ARG-F
   #:ARG-REGISTER-P
   #:BEQI
   #:BEQI-D
   #:BEQI-F
   #:BEQR
   #:BEQR-D
   #:BEQR-F
   #:BGEI
   #:BGEI-D
   #:BGEI-F
   #:BGEI-U
   #:BGER
   #:BGER-D
   #:BGER-F
   #:BGER-U
   #:BGTI
   #:BGTI-D
   #:BGTI-F
   #:BGTI-U
   #:BGTR
   #:BGTR-D
   #:BGTR-F
   #:BGTR-U
   #:BLEI
   #:BLEI-D
   #:BLEI-F
   #:BLEI-U
   #:BLER
   #:BLER-D
   #:BLER-F
   #:BLER-U
   #:BLTGTI-D
   #:BLTGTI-F
   #:BLTGTR-D
   #:BLTGTR-F
   #:BLTI
   #:BLTI-D
   #:BLTI-F
   #:BLTI-U
   #:BLTR
   #:BLTR-D
   #:BLTR-F
   #:BLTR-U
   #:BMCI
   #:BMCR
   #:BMSI
   #:BMSR
   #:BNEI
   #:BNEI-D
   #:BNEI-F
   #:BNER
   #:BNER-D
   #:BNER-F
   #:BOADDI
   #:BOADDI-U
   #:BOADDR
   #:BOADDR-U
   #:BORDI-D
   #:BORDI-F
   #:BORDR-D
   #:BORDR-F
   #:BOSUBI
   #:BOSUBI-U
   #:BOSUBR
   #:BOSUBR-U
   #:BUNEQI-D
   #:BUNEQI-F
   #:BUNEQR-D
   #:BUNEQR-F
   #:BUNGEI-D
   #:BUNGEI-F
   #:BUNGER-D
   #:BUNGER-F
   #:BUNGTI-D
   #:BUNGTI-F
   #:BUNGTR-D
   #:BUNGTR-F
   #:BUNLEI-D
   #:BUNLEI-F
   #:BUNLER-D
   #:BUNLER-F
   #:BUNLTI-D
   #:BUNLTI-F
   #:BUNLTR-D
   #:BUNLTR-F
   #:BUNORDI-D
   #:BUNORDI-F
   #:BUNORDR-D
   #:BUNORDR-F
   #:BXADDI
   #:BXADDI-U
   #:BXADDR
   #:BXADDR-U
   #:BXSUBI
   #:BXSUBI-U
   #:BXSUBR
   #:BXSUBR-U
   #:CALLEE-SAVE-P
   #:CALLI
   #:CALLR
   #:COMR
   #:DISASSEMBLE-JIT
   #:DIVI
   #:DIVI-D
   #:DIVI-F
   #:DIVI-U
   #:DIVR
   #:DIVR-D
   #:DIVR-F
   #:DIVR-U
   #:ELLIPSIS
   #:EMIT
   #:EPILOG
   #:EQI
   #:EQI-D
   #:EQI-F
   #:EQR
   #:EQR-D
   #:EQR-F
   #:EXTR-C
   #:EXTR-D
   #:EXTR-D-F
   #:EXTR-F
   #:EXTR-F-D
   #:EXTR-I
   #:EXTR-S
   #:EXTR-UC
   #:EXTR-UI
   #:EXTR-US
   #:FINISHI
   #:FINISHR
   #:FORWARD
   #:FORWARD-P
   #:FRAME
   #:GEI
   #:GEI-D
   #:GEI-F
   #:GEI-U
   #:GER
   #:GER-D
   #:GER-F
   #:GER-U
   #:GET-CODE
   #:GET-DATA
   #:GET-NOTE
   #:GETARG
   #:GETARG-C
   #:GETARG-D
   #:GETARG-F
   #:GETARG-I
   #:GETARG-L
   #:GETARG-S
   #:GETARG-UC
   #:GETARG-UI
   #:GETARG-US
   #:GTI
   #:GTI-D
   #:GTI-F
   #:GTI-U
   #:GTR
   #:GTR-D
   #:GTR-F
   #:GTR-U
   #:HTONR
   #:HTONR-UI
   #:HTONR-UL
   #:HTONR-US
   #:INDIRECT
   #:INDIRECT-P
   #:JMPI
   #:JMPR
   #:LABEL
   #:LDI
   #:LDI-C
   #:LDI-D
   #:LDI-F
   #:LDI-I
   #:LDI-L
   #:LDI-S
   #:LDI-UC
   #:LDI-UI
   #:LDI-US
   #:LDR
   #:LDR-C
   #:LDR-D
   #:LDR-F
   #:LDR-I
   #:LDR-L
   #:LDR-S
   #:LDR-UC
   #:LDR-UI
   #:LDR-US
   #:LDXI
   #:LDXI-C
   #:LDXI-D
   #:LDXI-F
   #:LDXI-I
   #:LDXI-L
   #:LDXI-S
   #:LDXI-UC
   #:LDXI-UI
   #:LDXI-US
   #:LDXR
   #:LDXR-C
   #:LDXR-D
   #:LDXR-F
   #:LDXR-I
   #:LDXR-L
   #:LDXR-S
   #:LDXR-UC
   #:LDXR-UI
   #:LDXR-US
   #:LEI
   #:LEI-D
   #:LEI-F
   #:LEI-U
   #:LER
   #:LER-D
   #:LER-F
   #:LER-U
   #:LINK
   #:LIVE
   #:LSHI
   #:LSHR
   #:LTGTI-D
   #:LTGTI-F
   #:LTGTR-D
   #:LTGTR-F
   #:LTI
   #:LTI-D
   #:LTI-F
   #:LTI-U
   #:LTR
   #:LTR-D
   #:LTR-F
   #:LTR-U
   #:MOVI
   #:MOVI-D
   #:MOVI-D-W
   #:MOVI-D-WW
   #:MOVI-F
   #:MOVI-F-W
   #:MOVR
   #:MOVR-D
   #:MOVR-D-W
   #:MOVR-D-WW
   #:MOVR-F
   #:MOVR-F-W
   #:MOVR-W-D
   #:MOVR-W-F
   #:MOVR-WW-D
   #:MULI
   #:MULI-D
   #:MULI-F
   #:MULR
   #:MULR-D
   #:MULR-F
   #:NAME
   #:NEGR
   #:NEGR-D
   #:NEGR-F
   #:NEI
   #:NEI-D
   #:NEI-F
   #:NER
   #:NER-D
   #:NER-F
   #:NOTE
   #:NTOHR
   #:NTOHR-UI
   #:NTOHR-UL
   #:NTOHR-US
   #:ORDI-D
   #:ORDI-F
   #:ORDR-D
   #:ORDR-F
   #:ORI
   #:ORR
   #:PATCH
   #:PATCH-ABS
   #:PATCH-AT
   #:POINTER-P
   #:PREPARE
   #:PRINT-JIT
   #:PROLOG
   #:PUSHARGI
   #:PUSHARGI-D
   #:PUSHARGI-F
   #:PUSHARGI-P
   #:PUSHARGR
   #:PUSHARGR-D
   #:PUSHARGR-F
   #:PUTARGI
   #:PUTARGI-D
   #:PUTARGI-F
   #:PUTARGI-P
   #:PUTARGR
   #:PUTARGR-D
   #:PUTARGR-F
   #:QDIVI
   #:QDIVI-U
   #:QDIVR
   #:QDIVR-U
   #:QMULI
   #:QMULI-U
   #:QMULR
   #:QMULR-U
   #:REALIZE
   #:REMI
   #:REMI-U
   #:REMR
   #:REMR-U
   #:RET
   #:RETI
   #:RETI-D
   #:RETI-F
   #:RETI-P
   #:RETR
   #:RETR-D
   #:RETR-F
   #:RETVAL
   #:RETVAL-C
   #:RETVAL-D
   #:RETVAL-F
   #:RETVAL-I
   #:RETVAL-L
   #:RETVAL-S
   #:RETVAL-UC
   #:RETVAL-UI
   #:RETVAL-US
   #:RSBI
   #:RSBI-D
   #:RSBI-F
   #:RSBR
   #:RSBR-D
   #:RSBR-F
   #:RSHI
   #:RSHI-U
   #:RSHR
   #:RSHR-U
   #:SET-CODE
   #:SET-DATA
   #:SQRTR-D
   #:SQRTR-F
   #:STI
   #:STI-C
   #:STI-D
   #:STI-F
   #:STI-I
   #:STI-L
   #:STI-S
   #:STR
   #:STR-C
   #:STR-D
   #:STR-F
   #:STR-I
   #:STR-L
   #:STR-S
   #:STXI
   #:STXI-C
   #:STXI-D
   #:STXI-F
   #:STXI-I
   #:STXI-L
   #:STXI-S
   #:STXR
   #:STXR-C
   #:STXR-D
   #:STXR-F
   #:STXR-I
   #:STXR-L
   #:STXR-S
   #:SUBCI
   #:SUBCR
   #:SUBI
   #:SUBI-D
   #:SUBI-F
   #:SUBR
   #:SUBR-D
   #:SUBR-F
   #:SUBXI
   #:SUBXR
   #:TARGET-P
   #:TRAMP
   #:TRUNCR-D
   #:TRUNCR-D-I
   #:TRUNCR-D-L
   #:TRUNCR-F
   #:TRUNCR-F-I
   #:TRUNCR-F-L
   #:UNEQI-D
   #:UNEQI-F
   #:UNEQR-D
   #:UNEQR-F
   #:UNGEI-D
   #:UNGEI-F
   #:UNGER-D
   #:UNGER-F
   #:UNGTI-D
   #:UNGTI-F
   #:UNGTR-D
   #:UNGTR-F
   #:UNLEI-D
   #:UNLEI-F
   #:UNLER-D
   #:UNLER-F
   #:UNLTI-D
   #:UNLTI-F
   #:UNLTR-D
   #:UNLTR-F
   #:UNORDI-D
   #:UNORDI-F
   #:UNORDR-D
   #:UNORDR-F
   #:XORI
   #:XORR
   ))
